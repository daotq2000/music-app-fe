{"ast":null,"code":"import React,{useState,useEffect}from'react';import RegisterImage from'../../resource/images/register_img.png';import axios from'axios';import{API_ENDPOINT}from'../../utils/Constaints';import history from'../../router/history';import{useSnackbar}from'notistack';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const{enqueueSnackbar}=useSnackbar();const[form,setForm]=useState({username:'',password:''});const[error,setError]=useState({txtUsername:false,txtPassword:false});const onSubmit=()=>{let validate=validateData(form);let config=null;let anchorOrigin={horizontal:'center',vertical:'bottom'};if(validate){axios.post(API_ENDPOINT+'auth',form).then(res=>{const token=res.headers.authorization;localStorage.setItem('Authorization',token);config={variant:'success',anchorOrigin:anchorOrigin};enqueueSnackbar('Đăng nhập thành công',config);history.push(\"/admin/album\");}).catch(error=>{config={variant:'error',anchorOrigin:anchorOrigin};let errors=error.response;if(errors.status==401){enqueueSnackbar('Tên tài khoản hoặc mật khẩu không chính xác',config);}});}};const handleChangeValue=e=>{let name=e.target.name;let value=e.target.value;if(name=='username'){setForm({...form,username:value});}if(name=='password'){setForm({...form,password:value});}};const validateData=data=>{let isValid=true;let txtUsername,txtPassword;if(data.username.trim().length==0){txtUsername=true;isValid=false;}else{txtUsername=false;}if(data.password.trim().length==0){isValid=false;txtPassword=true;}else{txtPassword=false;}setError({...error,txtUsername:txtUsername,txtPassword:txtPassword});return isValid;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"ms_profile_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%'},className:\"ms_profile_box\",children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px'},className:\"ms_register_img\",children:/*#__PURE__*/_jsx(\"img\",{src:RegisterImage,alt:\"\",className:\"img-fluid\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px'},className:\"ms_register_form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng Nh\\u1EADp / \\u0110\\u0103ng K\\xFD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"username\",error:error.txtUsername,helperText:\"Kh\\xF4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\",onChange:handleChangeValue,type:\"text\",placeholder:\"T\\xE0i Kho\\u1EA3n\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form_icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa_icon form-envelope\",\"aria-hidden\":\"true\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:error.txtUsername?{display:'',color:'#64c8e7'}:{display:'none'},className:\"error-form\",children:\"T\\xEAn t\\xE0i kho\\u1EA3n kh\\xF4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{error:error.txtPassword,helperText:\"Kh\\xF4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\",onChange:handleChangeValue,name:\"password\",type:\"password\",placeholder:\"M\\u1EADt Kh\\u1EA9u\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form_icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa_icon form-lock\",\"aria-hidden\":\"true\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:error.txtPassword?{display:'',color:'#64c8e7'}:{display:'none'},className:\"error-form\",children:\"M\\u1EADt kh\\u1EA9u kh\\xF4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"remember_checkbox\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Ghi nh\\u1EDB \\u0111\\u0103ng nh\\u1EADp\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"})]})}),/*#__PURE__*/_jsx(\"a\",{onClick:onSubmit,className:\"ms_btn\",target:\"_blank\",children:\"\\u0110\\u0103ng nh\\u1EADp ngay\"}),/*#__PURE__*/_jsx(\"div\",{className:\"popup_forgot\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u ?\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",\"data-toggle\":\"modal\",className:\"ms_modal1 hideCurrentModel\",children:\"\\u0110\\u0103ng k\\xFD\"})]})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","RegisterImage","axios","API_ENDPOINT","history","useSnackbar","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","enqueueSnackbar","form","setForm","username","password","error","setError","txtUsername","txtPassword","onSubmit","validate","validateData","config","anchorOrigin","horizontal","vertical","post","then","res","token","headers","authorization","localStorage","setItem","variant","push","catch","errors","response","status","handleChangeValue","e","name","target","value","data","isValid","trim","length","children","className","style","width","padding","src","alt","helperText","onChange","type","placeholder","display","color","onClick","href","to"],"sources":["/home/luongtx/Workspace/personal/music-app-fe/src/pages/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport RegisterImage from '../../resource/images/register_img.png'\nimport axios from 'axios'\nimport { API_ENDPOINT } from '../../utils/Constaints'\nimport history from '../../router/history'\nimport { useSnackbar } from 'notistack';\nimport { Link } from 'react-router-dom';\nconst Login = () => {\n    const { enqueueSnackbar } = useSnackbar();\n    const [form, setForm] = useState({\n        username: '',\n        password: ''\n    })\n    const [error, setError] = useState({ txtUsername: false, txtPassword: false });\n    const onSubmit = () => {\n        let validate = validateData(form)\n        let config = null;\n        let anchorOrigin = { horizontal: 'center' , vertical: 'bottom'}\n        if (validate) {\n            axios.post(API_ENDPOINT + 'auth', form).then((res) => {\n                const token = res.headers.authorization;\n                localStorage.setItem('Authorization', token);\n                config = {variant: 'success',anchorOrigin:anchorOrigin}\n                enqueueSnackbar('Đăng nhập thành công', config);\n                history.push(`/admin/album`);\n            }).catch((error) => {\n                config = {variant: 'error',anchorOrigin:anchorOrigin}\n                let errors = error.response;\n                if (errors.status == 401) {\n                    enqueueSnackbar('Tên tài khoản hoặc mật khẩu không chính xác', config);\n                }\n            })\n        }\n    }\n    const handleChangeValue = (e) => {\n        let name = e.target.name;\n        let value = e.target.value;\n        if (name == 'username') {\n            setForm({ ...form, username: value })\n        }\n        if (name == 'password') {\n            setForm({ ...form, password: value })\n        }\n    }\n    const validateData = (data) => {\n        let isValid = true;\n        let txtUsername, txtPassword;\n        if (data.username.trim().length == 0) {\n            txtUsername = true;\n            isValid = false;\n        } else {\n            txtUsername = false;\n        }\n        if (data.password.trim().length == 0) {\n            isValid = false;\n            txtPassword = true;\n        } else {\n            txtPassword = false;\n        }\n        setError({ ...error, txtUsername: txtUsername, txtPassword: txtPassword })\n        return isValid;\n    }\n    return (\n        <>\n            <div className=\"ms_profile_wrapper\">\n                <div style={{ width: '100%' }} className=\"ms_profile_box\">\n\n                    <div style={{ padding: '10px' }} className=\"ms_register_img\">\n                        <img src={RegisterImage} alt=\"\" className=\"img-fluid\" />\n                    </div>\n                    <div style={{ padding: '10px' }} className=\"ms_register_form\">\n                        <h2>Đăng Nhập / Đăng Ký</h2>\n                        <div className=\"form-group\">\n                            <input name=\"username\" error={error.txtUsername} helperText=\"Không được để trống\" onChange={handleChangeValue} type=\"text\" placeholder=\"Tài Khoản\" className=\"form-control\" />\n                            <span className=\"form_icon\">\n                                <i className=\"fa_icon form-envelope\" aria-hidden=\"true\" />\n                            </span>\n                            <br />\n                            <span style={error.txtUsername ? { display: '', color: '#64c8e7' } : { display: 'none' }} className=\"error-form\">\n                                Tên tài khoản không được để trống\n                            </span>\n                        </div>\n                        <div className=\"form-group\">\n                            <input error={error.txtPassword} helperText=\"Không được để trống\" onChange={handleChangeValue} name=\"password\" type=\"password\" placeholder=\"Mật Khẩu\" className=\"form-control\" />\n                            <span className=\"form_icon\">\n                                <i className=\"fa_icon form-lock\" aria-hidden=\"true\" />\n                            </span>\n                            <br />\n                            <span style={error.txtPassword ? { display: '', color: '#64c8e7' } : { display: 'none' }} className=\"error-form\">\n                                Mật khẩu không được để trống\n                            </span>\n                        </div>\n                        <div className=\"remember_checkbox\">\n                            <label>Ghi nhớ đăng nhập\n                                <input type=\"checkbox\" />\n                                <span className=\"checkmark\" />\n                            </label>\n                        </div>\n                        <a onClick={onSubmit} className=\"ms_btn\" target=\"_blank\">Đăng nhập ngay</a>\n                        <div className=\"popup_forgot\">\n                            <a href=\"#\">Quên mật khẩu ?</a>\n                        </div>\n                        <p>Chưa có tài khoản? <Link to={`/register`} data-toggle=\"modal\" className=\"ms_modal1 hideCurrentModel\">Đăng ký</Link></p>\n                    </div>\n\n                </div>\n            </div>\n        </>\n    );\n}\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}